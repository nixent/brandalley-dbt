version: 2

models:
  
  - name: zendesk_tickets_detailed
    description: "A detailed view of all tickets for zendesk"
    columns:
      - name: id
        description: "Primary key"
        tests:
          - unique
          - not_null
        meta:
          dimension:
            format: id
          metrics:
            total_zendesk_tickets:
              label: 'Total number of tickets from zendesk'
              type: count_distinct
              description: "Number of tickets in Zendesk"
              hidden: false
              round: 0      
      - name: created_at
        description: "created_at"
        meta:
          dimension:
            type: date
            time_intervals: ['HOUR', 'DAY', 'WEEK', 'MONTH', 'QUARTER']            
      - name: description
        description: "description"
      - name: due_at
        description: "Due date of the ticket"
        meta:
          dimension:
            type: date
            time_intervals: ['HOUR', 'DAY', 'WEEK', 'MONTH', 'QUARTER']            
      - name: is_public
        description: "is_public"
      - name: merged_ticket_ids
        description: "Ids of tickets merged"
      - name: status
        description: "Status of the ticket"
      - name: subject
        description: "Subject of the ticket"
      - name: updated_at
        description: "Update date"
        meta:
          dimension:
            type: date
            time_intervals: ['HOUR', 'DAY', 'WEEK', 'MONTH', 'QUARTER']            
      - name: type
        description: "Type"
      - name: URL
        description: "URL"
      - name: via_channel
        description: "Channel the ticket is coming from"
      - name: via_source_rel
        description: "Source relative to the channel"
      - name: phone_ticket
        description: "1 when it's a phone ticket, 0 otherwise"
        meta:
          metrics:
            total_zendesk_phone_tickets:
              label: 'Total number of tickets coming from calls from zendesk'
              type: sum
              description: "Number of tickets coming from calls in Zendesk"
              hidden: false
              round: 0      
      - name: chat_ticket
        description: "1 when it's a chat ticket, 0 otherwise"
        meta:
          metrics:
            total_zendesk_chat_tickets:
              label: 'Total number of tickets coming from chat from zendesk'
              type: sum
              description: "Number of tickets coming from chat in Zendesk"
              hidden: false
              round: 0      
      - name: web_email_ticket
        description: "1 when it's a web or email ticket, 0 otherwise"
        meta:
          metrics:
            total_zendesk_web_email_tickets:
              label: 'Total number of tickets coming from web or email from zendesk'
              type: sum
              description: "Number of tickets coming from web or email in Zendesk"
              hidden: false
              round: 0      
      - name: web_ticket
        description: "1 when it's a phone ticket, 0 otherwise"
        meta:
          metrics:
            total_zendesk_web_tickets:
              label: 'Total number of tickets coming from web from zendesk'
              type: sum
              description: "Number of tickets coming from web in Zendesk"
              hidden: false
              round: 0      
      - name: email_ticket
        description: "1 when it's a phone ticket, 0 otherwise"
        meta:
          metrics:
            total_zendesk_email_tickets:
              label: 'Total number of tickets coming from email from zendesk'
              type: sum
              description: "Number of tickets coming from email in Zendesk"
              hidden: false
              round: 0      