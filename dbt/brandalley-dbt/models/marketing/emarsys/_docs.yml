version: 2

models:
  - name: new_customers
    description: "new customers being pushed to emarsys"
    columns:
      - name: entity_id
        data_type: <integer>
        description: "primary key"
        tests:
          - not_null:
              config:
                severity: warn
                warn_if: "> 100"

  - name: email_events
    columns:
      - name: action
      - name: contact_id 
      - name: launch_id 
      - name: campaign_type 
      - name: campaign_name
      - name: email_type
      - name: campaign_category
      - name: campaign_subject
      - name: domain 
      - name: campaign_id 
      - name: message_id
        meta:
          metrics:
            action_count:
              type: count
      - name: event_time 
        meta:
          dimension:
            type: timestamp
      - name: email_sent_at
        meta:
          dimension:
            type: timestamp
      - name: customer_id
      - name: link_id
      - name: category_name
      - name: link_name

